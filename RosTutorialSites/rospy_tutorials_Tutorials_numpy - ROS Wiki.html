<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0051)http://wiki.ros.org/rospy_tutorials/Tutorials/numpy -->
<html class="gr__wiki_ros_org"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="google-site-verification" content="CjkdY6BqKWAVmQ78_iSq6J7ZZ9AoL7-CjFVBYGg9FU4">
<link rel="shortcut icon" href="http://wiki.ros.org/custom/favicon.ico" type="image/ico">
<link rel="stylesheet" href="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/bootstrap.min.css">
<script type="text/javascript" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/4c8610d177"></script><script src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/nr-1099.min.js"></script><script type="text/javascript" async="" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/ga.js"></script><script src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/jquery-1.11.0.min.js"></script>
<script src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/bootstrap.min.js"></script>
<script type="text/javascript" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/sorttable.js"></script>
<script type="text/javascript" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/jquery.min.js"></script>                         
<script type="text/javascript" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/seesaw.js"></script> 
<script type="text/javascript" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/rosversion.js"></script> 
<!--script type="text/javascript" src="/custom/libraries/RGraph.common.core.js" ></script Used for metrics only, should be conditional, not at the top-->
<!--script type="text/javascript" src="/custom/libraries/RGraph.bar.js" ></script same as above -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17821189-2']);
  _gaq.push(['_setDomainName', 'wiki.ros.org']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(3),u=e(4),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],t),e}finally{f.emit("fn-end",[c.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){if(!o)return!1;if(e!==o)return!1;if(!n)return!0;if(!i)return!1;for(var t=i.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var o=null,i=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var u=navigator.userAgent,f=u.match(a);f&&u.indexOf("Chrome")===-1&&u.indexOf("Chromium")===-1&&(o="Safari",i=f[1])}n.exports={agent:o,version:i,match:r}},{}],3:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],4:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],5:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=v(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||o(t)}function w(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:l,addEventListener:l,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(3),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!E++){var e=x.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+x.offset],null,"api");var t=l.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===l.readyState&&i()}function i(){f("mark",["domContent",a()+x.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-x.offset}var u=(new Date).getTime(),f=e("handle"),c=e(3),s=e("ee"),p=e(2),d=window,l=d.document,m="addEventListener",v="attachEvent",g=d.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:g,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1099.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),x=n.exports={offset:u,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),l[m]?(l[m]("DOMContentLoaded",i,!1),d[m]("load",r,!1)):(l[v]("onreadystatechange",o),d[v]("onload",r)),f("mark",["firstbyte",u],null,"api");var E=0,O=e(5)},{}]},{},["loader"]);</script><script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","queueTime":0,"licenseKey":"4c8610d177","agent":"","transactionName":"NFZaMEVUV0ZVBkBeCQ0cbRZeGktaRxVNaBIWR1cWXlRVRhtP","applicationID":"3371695","errorBeacon":"bam.nr-data.net","applicationTime":214}</script>
<meta name="robots" content="index,nofollow">

<title>rospy_tutorials/Tutorials/numpy - ROS Wiki</title>
<script type="text/javascript" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static197/rostheme/css/msie.css">
<![endif]-->




<link rel="canonical" href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy">

<link rel="Start" href="http://wiki.ros.org/Documentation">
<link rel="Alternate" title="Wiki Markup" href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy?action=raw">
<link rel="Alternate" media="print" title="Print View" href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy?action=print">
<link rel="Up" href="http://wiki.ros.org/rospy_tutorials/Tutorials">
<link rel="Search" href="http://wiki.ros.org/FindPage">
<link rel="Index" href="http://wiki.ros.org/TitleIndex">
<link rel="Glossary" href="http://wiki.ros.org/WordIndex">
<link rel="Help" href="http://wiki.ros.org/HelpOnFormatting">
</head>

<body lang="en" dir="ltr" data-gr-c-s-loaded="true">

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-5950817-2");
pageTracker._trackPageview();
} catch(err) {}</script>

<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
if(f) f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
if(e) {
  searchChange(e);
  searchBlur(e);
}

function handleSubmit() {
  var f = document.getElementById('searchform');
  var t = document.getElementById('searchinput');
  var r = document.getElementById('real_searchinput');

  //alert("handleSubmit "+ t.value);
  if(t.value.match(/review/)) {
    r.value = t.value;
  } else {
    //r.value = t.value + " -PackageReviewCategory -StackReviewCategory -M3Review -DocReview -ApiReview -HelpOn -BadContent -LocalSpellingWords";
    r.value = t.value + " -PackageReviewCategory -StackReviewCategory -DocReview -ApiReview";
  }
  //return validate(f);
}
//-->
</script>

<div id="dpage">
  <div id="dpage-inner">
    <div id="header"><div id="topnav">

<!-- Alert box -->
<!-- To enable/disable the alert box, uncomment/comment the block below and update the content below the button. -->

    <div class="alert alert-info alert-dismissable" style="text-align: center;">
<script>
jQuery(function( $ ){
    alert_box_name = 'roswiki_crystal_tshirt'
    state = localStorage.getItem(alert_box_name);
    if (!state) {
      localStorage.setItem(alert_box_name, 'open');
    }
    state = localStorage.getItem(alert_box_name);
    if (state == 'closed') {
        $( '#topnav .alert' ).hide();
    }
    $( '.close' ).click(function () {
	console.log('in .close.click');
        localStorage.setItem(alert_box_name, 'closed');
        $( '#topnav .alert' ).hide();
  });
});
</script>
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
      ROS Crystal Clemmys tshirts are <a href="https://teespring.com/ros-crystal-clemmys">available to order</a> until December 31st! <br>
      There are tshirts, hoodies, and kids sizes. <a href="https://teespring.com/ros-crystal-clemmys">Order yours now!</a>.
    </div>

<!-- End Alert box -->

      <table id="topnav-table">
        <tbody><tr>
          <td width="300" valign="top"><a href="http://wiki.ros.org/"><img border="0" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/ros_org.png" alt="ros.org" width="238" height="51"></a></td>
          <td width="500" valign="middle">
            <a href="http://www.ros.org/about-ros">About</a>
            |
            <a href="http://wiki.ros.org/Support">Support</a>
            |
            <a href="http://discourse.ros.org/">Discussion Forum</a>
            |
            <a href="http://status.ros.org/">Service Status</a>
            |
            <a href="http://answers.ros.org/">Q&amp;A answers.ros.org</a>

<!--<a href="http://roscon.ros.org/2016/"><img align="middle" style="padding-left: 15px;" src="http://ros.org/images/roscon_wiki_header.jpg" width="133" height="65" alt="ROSCon 2016" /></a>
-->

<!-- <a href="https://events.osrfoundation.org/ros-kong-2014/"><img align="middle" style="padding-left: 15px;" src="http://ros.org/images/ros_kong_2014_badge.png" width="133" height="38" alt="roskong" /></a>
-->
<!--a href="https://events.osrfoundation.org/ros-kong-2014/"><img align="middle" style="padding-left: 15px;" src="http://imgur.com/eMzUJVe.png" width="133" height="38" alt="roskong" /></a-->
          </td>

          <td valign="middle" align="right">

<script language="Javascript">

function Searchy(theButton){

theForm = theButton.form;
newID = theForm.input.value;
theForm.q.value = newID;
theForm.input.value=theForm.input.value

}
</script>


<form action="https://www.ros.org/search/index.html" id="cse">
  <div>
    <label>Search:</label>
    <input type="hidden" name="cx" value="005596761048178735851:_ejygd2ukbe">
    <input type="hidden" name="cof" value="FORID:11;NB:1">
    <input type="hidden" name="filter" value="0">
    <input type="hidden" name="num" value="10">

    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="input" id="input" autocomplete="on" style="width: 35%">
    <input type="hidden" name="q" value="">
    <input type="submit" name="sa" value="Submit" onclick="Searchy(this)">

  </div>
</form>

         </td>
      </tr>
      <tr>
        <td colspan="3" height="53" width="1024"><nobr><img src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_left.png" width="17" height="53" alt=""><a href="http://wiki.ros.org/"><img border="0" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_documentation.png" width="237" height="53" alt="Documentation"></a><img src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_spacer.png" width="69" height="53"><a href="https://index.ros.org/packages"><img border="0" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_browse_software.png" width="268" height="53" alt="Browse Software"></a><img src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_spacer.png" width="69" height="53"><a href="http://www.ros.org/news"><img border="0" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_news.png" width="84" height="53" alt="News"></a><img src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_spacer.png" width="69" height="53"><a href="http://wiki.ros.org/ROS/Installation"><img border="0" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_download.png" width="151" height="53" alt="Download"></a><img src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/menu_right.png" width="60" height="53"></nobr></td>

      </tr>
    </tbody></table> <!-- topnav-table -->

    </div> <!-- /#topav -->
  </div> <!-- /#header -->


<div id="header2">

<ul id="pagelocation">
<li><a href="http://wiki.ros.org/rospy_tutorials">rospy_tutorials</a></li><li><a href="http://wiki.ros.org/rospy_tutorials/Tutorials">Tutorials</a></li><li><a class="backlink" href="http://wiki.ros.org/action/fullsearch/rospy_tutorials/Tutorials/numpy?action=fullsearch&amp;context=180&amp;value=linkto%3A%22rospy_tutorials%2FTutorials%2Fnumpy%22" rel="nofollow" title="Click to do a full-text search for this title">numpy</a></li>
</ul>

<div id="locationline">
</div>
</div>

<div id="sidebar">
<div class="sidepanel">
<h1>Wiki</h1>

<ul id="navibar">
<li class="wikilink"><a href="http://wiki.ros.org/Distributions">Distributions</a></li><li class="wikilink"><a href="http://wiki.ros.org/ROS/Installation">ROS/Installation</a></li><li class="wikilink"><a href="http://wiki.ros.org/ROS/Tutorials">ROS/Tutorials</a></li><li class="wikilink"><a href="http://wiki.ros.org/RecentChanges">RecentChanges</a></li><li class="current"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy">numpy</a></li>
</ul>

</div>
<div class="sidepanel">
<h1>Page</h1>
<ul class="editbar"><li><span class="disabled">Immutable Page</span></li><li class="toggleCommentsButton" style="display:none;"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#" class="nbcomment" onclick="toggleComments();return false;">Comments</a></li><li><a class="nbinfo" href="http://wiki.ros.org/action/info/rospy_tutorials/Tutorials/numpy?action=info" rel="nofollow">Info</a></li><li><a class="nbattachments" href="http://wiki.ros.org/action/AttachFile/rospy_tutorials/Tutorials/numpy?action=AttachFile" rel="nofollow">Attachments</a></li><li>
<form class="actionsmenu" method="GET" action="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show">More Actions:</option><option value="raw">Raw Text</option>
<option value="print">Print View</option>
<option value="RenderAsDocbook">Render as Docbook</option>
<option value="show" disabled="" class="disabled">Delete Cache</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">Check Spelling</option>
<option value="LikePages">Like Pages</option>
<option value="LocalSiteMap">Local Site Map</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">Rename Page</option>
<option value="CopyPage">Copy Page</option>
<option value="DeletePage" disabled="" class="disabled">Delete Page</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="MyPages">My Pages</option>
<option value="show" disabled="" class="disabled">Subscribe User</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">Remove Spam</option>
<option value="show" disabled="" class="disabled">Revert to this revision</option>
<option value="PackagePages">Package Pages</option>
<option value="SyncPages">Sync Pages</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="CreatePdfDocument">CreatePdfDocument</option>
<option value="Load">Load</option>
<option value="RawFile">RawFile</option>
<option value="Save">Save</option>
<option value="SlideShow">SlideShow</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('More Actions:');
//-->
</script>
</form>
</li></ul>

</div>
<div class="sidepanel">
<h1>User</h1>
<ul id="username"><li><a href="http://wiki.ros.org/action/login/rospy_tutorials/Tutorials/numpy?action=login" id="login" rel="nofollow">Login</a></li></ul>
</div>
</div>

<div id="page" lang="en" dir="ltr">

<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><p class="line867"><span class="anchor" id="line-1-1"></span><span class="anchor" id="line-2-1"></span></p><div><table><tbody><tr>  <td style="background-color: #cce0ff"><strong>Note:</strong> This tutorial assumes that you have completed the previous tutorials:   <a href="http://wiki.ros.org/rospy_tutorials/Tutorials">rospy tutorials</a>. </td>
</tr>
</tbody></table></div><span class="anchor" id="line-3-1"></span><span class="anchor" id="line-4-1"></span><span class="anchor" id="line-5-1"></span><span class="anchor" id="line-6-1"></span><div><table><tbody><tr>  <td style="background-color: #bbceee"> <img alt="(!)" height="15" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/idea.png" title="(!)" width="15"> Please ask about problems and questions regarding this tutorial on <a class="http" href="http://answers.ros.org/">answers.ros.org</a>. Don't forget to include in your question the link to this page, the versions of your OS &amp; ROS, and also add appropriate tags.</td>
</tr>
</tbody></table></div><span class="anchor" id="line-7-1"></span><span class="anchor" id="line-8-1"></span><span class="anchor" id="line-9-1"></span>
<h1 id="Using_numpy_with_rospy">Using numpy with rospy</h1>
<span class="anchor" id="line-10-1"></span><strong>Description:</strong> This tutorial covers using <a class="http" href="http://numpy.scipy.org/">numpy</a> with <a href="http://wiki.ros.org/rospy">rospy</a>, the ROS Python client library. Numpy is a popular scientific computing package for Python. You will often want to consider using Numpy with rospy if you are working with sensor data as it has better performance and many libraries for manipulating arrays of data.<br>
<br>
 <span class="anchor" id="line-11-1"></span><span class="anchor" id="line-12-1"></span><span class="anchor" id="line-13-1"></span><span class="anchor" id="line-14-1"></span><strong>Tutorial Level:</strong> BEGINNER<br>
 <br>
 <span class="anchor" id="line-15-1"></span><span class="anchor" id="line-16-1"></span><span class="anchor" id="line-17-1"></span><p class="line874"> <span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#Step_1:_Create_a_Package">Step 1: Create a Package</a></li><li>
<a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#Step_2:_Create_a_Listener">Step 2: Create a Listener</a></li><li>
<a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#Step_3:_Numpy-ize_the_Listener">Step 3: Numpy-ize the Listener</a></li><li>
<a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#Step_4:_Numpy-ize_a_Talker">Step 4: Numpy-ize a Talker</a></li></ol></div><p class="line874"> <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span></p><p class="line862">In this tutorial, we will go over the <tt class="backtick">rospy.numpy_msg</tt> module. The <tt class="backtick">rospy.numpy_msg</tt> module comes with the <tt class="backtick">numpy_msg()</tt> wrapper, which allows <a href="http://wiki.ros.org/Nodes">Nodes</a> to deserialize <a href="http://wiki.ros.org/Messages">Messages</a> directly into numpy arrays, where appropriate. The <tt class="backtick">numpy_msg()</tt> wrapper can also be used to publish Messages that contain numpy array data. <span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span></p><p class="line867">
</p><h2 id="Step_1:_Create_a_Package">Step 1: Create a Package</h2>
<span class="anchor" id="line-25"></span><p class="line862">Lets create a package to house the new code that we are developing. It needs to depend on rospy_tutorials as we will be using one of its <a href="http://wiki.ros.org/msg">Message types</a>. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p><p class="line867"><script type="text/javascript">
<!--
// @@ Buildsystem macro
function Buildsystem(sections) {
    var dotversion = ".buildsystem."

    // Tag shows unless already tagged
    $.each(sections.show,
        function() {
            $("div" + dotversion + this).not(".versionshow,.versionhide").addClass("versionshow")
        }
    )

    // Tag hides unless already tagged
    $.each(sections.hide,
        function() {
            $("div" + dotversion + this).not(".versionshow,.versionhide").addClass("versionhide")
        }
    )

      // Show or hide according to tag
      $(".versionshow").removeClass("versionshow").filter("div").show()
      $(".versionhide").removeClass("versionhide").filter("div").hide()
}

function getURLParameter(name) {
    return decodeURIComponent(
        (
            new RegExp(
                '[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)'
            ).exec(location.search) || [,""]
        )[1].replace(/\+/g, '%20')
    ) || null;
}

$(document).ready(function() {
    var activesystem = "catkin";
    var url_distro = getURLParameter('buildsystem');
    if (url_distro)
    {
        activesystem = url_distro;
    }
    $("div.buildsystem").not("."+activesystem).hide();
    $("#"+activesystem).click();
    $("input.version:hidden").each(function() {
        var bg = $(this).attr("value").split(":");
        $("div.version." + bg[0]).css("background-color", bg[1]).removeClass(bg[0])
    });
})
 // -->
</script>
<span class="btn-group">
<button id="catkin" class="btn btn-default" onclick="Buildsystem({show:[&#39;catkin&#39;], hide:[&#39;rosbuild&#39;]});this.style.color=&#39;#e6e6e6&#39;;this.style.background=&#39;#3e4f6e&#39;;document.getElementById(&#39;rosbuild&#39;).style.background=&#39;#e6e6e6&#39;;document.getElementById(&#39;rosbuild&#39;).style.color=&#39;#3e4f6e&#39;;return false" style="color: rgb(230, 230, 230); background: rgb(62, 79, 110);"> catkin </button>
<button id="rosbuild" class="btn btn-default" onclick="Buildsystem({show:[&#39;rosbuild&#39;], hide:[&#39;catkin&#39;]});this.style.color=&#39;#e6e6e6&#39;;this.style.background=&#39;#3e4f6e&#39;;document.getElementById(&#39;catkin&#39;).style.background=&#39;#e6e6e6&#39;;document.getElementById(&#39;catkin&#39;).style.color=&#39;#3e4f6e&#39;;return false" style="background: rgb(230, 230, 230); color: rgb(62, 79, 110);"> rosbuild </button>
</span> <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span></p><p class="line867"><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span></p><div class="buildsystem catkin"><span class="anchor" id="line-1-2"></span><p class="line867"><span class="anchor" id="line-2-2"></span><span class="anchor" id="line-3-2"></span></p><pre><span class="anchor" id="line-1-3"></span>catkin_create_pkg numpy_tutorial rospy rospy_tutorials</pre><span class="anchor" id="line-4-2"></span><span class="anchor" id="line-5-2"></span><p class="line874">As we are using numpy, we also need to make sure that our package declares this, so lets edit the package.xml file to add the following line: <span class="anchor" id="line-6-2"></span><span class="anchor" id="line-7-2"></span><span class="anchor" id="line-8-2"></span><span class="anchor" id="line-9-2"></span></p><pre><span class="anchor" id="line-1-4"></span>  &lt;build_depend&gt;python-numpy&lt;/build_depend&gt;
<span class="anchor" id="line-2-3"></span>  &lt;run_depend&gt;python-numpy&lt;/run_depend&gt;</pre></div><span class="anchor" id="line-40"></span><p class="line867"><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span></p><div class="buildsystem rosbuild" style="display: none;"><span class="anchor" id="line-1-5"></span><p class="line867"><span class="anchor" id="line-2-4"></span><span class="anchor" id="line-3-3"></span></p><pre><span class="anchor" id="line-1-6"></span>roscreate-pkg numpy_tutorial rospy rospy_tutorials</pre><span class="anchor" id="line-4-3"></span><span class="anchor" id="line-5-3"></span><p class="line862">As we are using numpy, we also need to make sure that our package declares this, so lets edit the <a href="http://wiki.ros.org/Manifest">manifest.xml</a> file to add the following <a href="http://wiki.ros.org/rosdep">rosdep</a> line: <span class="anchor" id="line-6-3"></span><span class="anchor" id="line-7-3"></span><span class="anchor" id="line-8-3"></span></p><pre><span class="anchor" id="line-1-7"></span>  &lt;rosdep name="python-numpy" /&gt;</pre></div><span class="anchor" id="line-50"></span><p class="line867">
</p><h2 id="Step_2:_Create_a_Listener">Step 2: Create a Listener</h2>
<span class="anchor" id="line-51"></span><p class="line862">By now, you're probably familiar with creating listener nodes. Lets start off simple and create a standard listener node that listens to the <tt class="backtick">floats</tt> <a href="http://wiki.ros.org/Topics">Topic</a> using the <tt class="backtick">rospy_tutorials/Floats</tt> <a href="http://wiki.ros.org/msg">Message type</a>. <span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span></p><p class="line862">Just for reference, here is the <tt class="backtick">rospy_tutorials/Floats</tt> definition: <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span></p><p class="line867"><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span></p><pre><span class="anchor" id="line-1-8"></span>$ rosmsg show rospy_tutorials/Floats
<span class="anchor" id="line-2-5"></span>float32[] data</pre><span class="anchor" id="line-59"></span><p class="line862">Now, lets start with this standard listener. Paste the text below into a file called <tt class="backtick">numpy_listener.py</tt>. <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></p><p class="line867"><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><span class="anchor" id="line-1-9"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
function isnumbered(obj) {
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add) {
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did, nstart, nstep) {
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c)) {
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    var n = nstart;
    while (l != null) {
      if (l.tagName == 'SPAN') {
        var s = document.createElement('SPAN');
        var a = document.createElement('A');
        s.className = 'LineNumber';
        a.appendChild(document.createTextNode(nformat(n,4,'')));
        a.href = '#' + did + '_' + n;
        s.appendChild(a);
        s.appendChild(document.createTextNode(' '));
        n += nstep;
        if (l.childNodes.length) {
          l.insertBefore(s, l.firstChild);
        }
        else {
          l.appendChild(s);
        }
      }
      l = l.nextSibling;
    }
  }
  return false;
}
function remnumber(did) {
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c)) {
    while (l != null) {
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  }
  return false;
}
function togglenumber(did, nstart, nstep) {
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>

<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-a77ac383216cc64b435cf33839170f43a19be9da\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#" onclick="return togglenumber(&#39;CA-a77ac383216cc64b435cf33839170f43a19be9da&#39;, 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-a77ac383216cc64b435cf33839170f43a19be9da" lang="en"><span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_1">   1</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_1"></span><span class="anchor" id="line-1-10"></span><span class="Comment">#!/usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_2">   2</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_2"></span><span class="anchor" id="line-2-6"></span><span class="ID">PKG</span> = <span class="String">'</span><span class="String">numpy_tutorial</span><span class="String">'</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_3">   3</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_3"></span><span class="anchor" id="line-3-4"></span><span class="ResWord">import</span> <span class="ID">roslib</span>; <span class="ID">roslib</span>.<span class="ID">load_manifest</span>(<span class="ID">PKG</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_4">   4</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_4"></span><span class="anchor" id="line-4-4"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_5">   5</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_5"></span><span class="anchor" id="line-5-4"></span><span class="ResWord">import</span> <span class="ID">rospy</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_6">   6</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_6"></span><span class="anchor" id="line-6-4"></span><span class="ResWord">from</span> <span class="ID">rospy_tutorials.msg</span> <span class="ResWord">import</span> <span class="ID">Floats</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_7">   7</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_7"></span><span class="anchor" id="line-7-4"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_8">   8</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_8"></span><span class="anchor" id="line-8-4"></span><span class="ResWord">def</span> <span class="ID">callback</span>(<span class="ID">data</span>):</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_9">   9</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_9"></span><span class="anchor" id="line-9-3"></span>    <span class="ResWord">print</span> <span class="ID">rospy</span>.<span class="ID">get_name</span>(), <span class="String">"</span><span class="String">I heard </span><span class="String">%s</span><span class="String">"</span>%<span class="ResWord">str</span>(<span class="ID">data</span>.<span class="ID">data</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_10">  10</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_10"></span><span class="anchor" id="line-10-2"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_11">  11</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_11"></span><span class="anchor" id="line-11-2"></span><span class="ResWord">def</span> <span class="ID">listener</span>():</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_12">  12</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_12"></span><span class="anchor" id="line-12-2"></span>    <span class="ID">rospy</span>.<span class="ID">init_node</span>(<span class="String">'</span><span class="String">listener</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_13">  13</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_13"></span><span class="anchor" id="line-13-2"></span>    <span class="ID">rospy</span>.<span class="ID">Subscriber</span>(<span class="String">"</span><span class="String">floats</span><span class="String">"</span>, <span class="ID">Floats</span>, <span class="ID">callback</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_14">  14</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_14"></span><span class="anchor" id="line-14-2"></span>    <span class="ID">rospy</span>.<span class="ID">spin</span>()</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_15">  15</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_15"></span><span class="anchor" id="line-15-2"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_16">  16</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_16"></span><span class="anchor" id="line-16-2"></span><span class="ResWord">if</span> <span class="ID">__name__</span> == <span class="String">'</span><span class="String">__main__</span><span class="String">'</span>:</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-a77ac383216cc64b435cf33839170f43a19be9da_17">  17</a> </span><span class="LineAnchor" id="CA-a77ac383216cc64b435cf33839170f43a19be9da_17"></span><span class="anchor" id="line-17-2"></span>    <span class="ID">listener</span>()</span>
</pre></div></div><span class="anchor" id="line-80"></span><p class="line874">Don't forget: <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p><p class="line867"><span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span></p><pre><span class="anchor" id="line-1-11"></span>chmod +x numpy_listener.py</pre><span class="anchor" id="line-85"></span><p class="line862">Lets make sure that this listener is working before we continue to the next step. We're going to run a <a href="http://wiki.ros.org/roscore">roscore</a>, your Node, and a <a href="http://wiki.ros.org/rostopic">rostopic</a> <tt class="backtick">pub</tt> to provide it with data. You'll need several windows: <span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span></p><p class="line874">Window 1: <span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></p><p class="line867"><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span></p><pre><span class="anchor" id="line-1-12"></span>roscore</pre><span class="anchor" id="line-92"></span><p class="line874">Window 2: <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span></p><p class="line867"><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span></p><pre><span class="anchor" id="line-1-13"></span>rosrun numpy_tutorial numpy_listener.py</pre><span class="anchor" id="line-97"></span><p class="line874">Window 3: <span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span></p><p class="line867"><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span></p><pre><span class="anchor" id="line-1-14"></span>rostopic pub -r 1 floats rospy_tutorials/Floats "[1.1, 2.2, 3.3, 4.4, 5.5]"</pre><span class="anchor" id="line-102"></span><p class="line874">You should see: <span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span></p><p class="line867"><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span></p><pre><span class="anchor" id="line-1-15"></span>$ rosrun numpy_tutorial numpy_listener.py
<span class="anchor" id="line-2-7"></span>/listener-977-1248226102144 I heard (1.1000000238418579, 2.2000000476837158, 3.2999999523162842, 4.4000000953674316, 5.5)
<span class="anchor" id="line-3-5"></span>/listener-977-1248226102144 I heard (1.1000000238418579, 2.2000000476837158, 3.2999999523162842, 4.4000000953674316, 5.5)
<span class="anchor" id="line-4-5"></span>... and so on</pre><span class="anchor" id="line-110"></span><p class="line862">You can go ahead and stop the <tt class="backtick">rosrun&nbsp;numpy_tutorial&nbsp;numpy_listener.py</tt>. <span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span></p><p class="line867">
</p><h2 id="Step_3:_Numpy-ize_the_Listener">Step 3: Numpy-ize the Listener</h2>
<span class="anchor" id="line-113"></span><p class="line862">In order to numpy-ize our listener, we only need to add two lines, one to import <tt class="backtick">numpy_msg</tt>, and the other to use it: <span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span></p><p class="line867"><span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span></p><pre><span class="anchor" id="line-1-16"></span>from rospy.numpy_msg import numpy_msg
<span class="anchor" id="line-2-8"></span>...
<span class="anchor" id="line-3-6"></span>    rospy.Subscriber("floats", numpy_msg(Floats), callback)</pre><span class="anchor" id="line-120"></span><p class="line874">Here are these two lines in context: <span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span></p><p class="line867"><span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-1-17"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#" onclick="return togglenumber(&#39;CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c&#39;, 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c" lang="en"><span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_1">   1</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_1"></span><span class="anchor" id="line-1-18"></span><span class="Comment">#!/usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_2">   2</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_2"></span><span class="anchor" id="line-2-9"></span><span class="ID">PKG</span> = <span class="String">'</span><span class="String">numpy_tutorial</span><span class="String">'</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_3">   3</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_3"></span><span class="anchor" id="line-3-7"></span><span class="ResWord">import</span> <span class="ID">roslib</span>; <span class="ID">roslib</span>.<span class="ID">load_manifest</span>(<span class="ID">PKG</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_4">   4</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_4"></span><span class="anchor" id="line-4-6"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_5">   5</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_5"></span><span class="anchor" id="line-5-5"></span><span class="ResWord">import</span> <span class="ID">rospy</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_6">   6</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_6"></span><span class="anchor" id="line-6-5"></span><span class="ResWord">from</span> <span class="ID">rospy_tutorials.msg</span> <span class="ResWord">import</span> <span class="ID">Floats</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_7">   7</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_7"></span><span class="anchor" id="line-7-5"></span><span class="ResWord">from</span> <span class="ID">rospy.numpy_msg</span> <span class="ResWord">import</span> <span class="ID">numpy_msg</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_8">   8</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_8"></span><span class="anchor" id="line-8-5"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_9">   9</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_9"></span><span class="anchor" id="line-9-4"></span><span class="ResWord">def</span> <span class="ID">callback</span>(<span class="ID">data</span>):</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_10">  10</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_10"></span><span class="anchor" id="line-10-3"></span>    <span class="ResWord">print</span> <span class="ID">rospy</span>.<span class="ID">get_name</span>(), <span class="String">"</span><span class="String">I heard </span><span class="String">%s</span><span class="String">"</span>%<span class="ResWord">str</span>(<span class="ID">data</span>.<span class="ID">data</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_11">  11</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_11"></span><span class="anchor" id="line-11-3"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_12">  12</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_12"></span><span class="anchor" id="line-12-3"></span><span class="ResWord">def</span> <span class="ID">listener</span>():</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_13">  13</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_13"></span><span class="anchor" id="line-13-3"></span>    <span class="ID">rospy</span>.<span class="ID">init_node</span>(<span class="String">'</span><span class="String">listener</span><span class="String">'</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_14">  14</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_14"></span><span class="anchor" id="line-14-3"></span>    <span class="ID">rospy</span>.<span class="ID">Subscriber</span>(<span class="String">"</span><span class="String">floats</span><span class="String">"</span>, <span class="ID">numpy_msg</span>(<span class="ID">Floats</span>), <span class="ID">callback</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_15">  15</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_15"></span><span class="anchor" id="line-15-3"></span>    <span class="ID">rospy</span>.<span class="ID">spin</span>()</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_16">  16</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_16"></span><span class="anchor" id="line-16-3"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_17">  17</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_17"></span><span class="anchor" id="line-17-3"></span><span class="ResWord">if</span> <span class="ID">__name__</span> == <span class="String">'</span><span class="String">__main__</span><span class="String">'</span>:</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_18">  18</a> </span><span class="LineAnchor" id="CA-48bb4257adcb5b5590cf3ec9541265acaec96a3c_18"></span><span class="anchor" id="line-18-1"></span>    <span class="ID">listener</span>()</span>
</pre></div></div><span class="anchor" id="line-142"></span><p class="line862">Now lets make sure that these are working. Just as before, lets startup a roscore, your listener, and a <tt class="backtick">rostopic&nbsp;pub</tt>. <span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span></p><p class="line874">Window 1: <span class="anchor" id="line-145"></span><span class="anchor" id="line-146"></span></p><p class="line867"><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span></p><pre><span class="anchor" id="line-1-19"></span>roscore</pre><span class="anchor" id="line-149"></span><p class="line874">Window 2: <span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span></p><p class="line867"><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span></p><pre><span class="anchor" id="line-1-20"></span>rosrun numpy_tutorial numpy_listener.py</pre><span class="anchor" id="line-154"></span><p class="line874">Window 3: <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span></p><p class="line867"><span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span></p><pre><span class="anchor" id="line-1-21"></span>rostopic pub -r 1 floats rospy_tutorials/Floats "[1.1, 2.2, 3.3, 4.4, 5.5]"</pre><span class="anchor" id="line-159"></span><p class="line874">This time the output is slightly different, which shows that you are now receiving numpy arrays: <span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span></p><p class="line867"><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span></p><pre><span class="anchor" id="line-1-22"></span>$ rosrun rospy_tutorials listener_numpy.py
<span class="anchor" id="line-2-10"></span>/listener-1243-1248226610835 I heard [ 1.10000002  2.20000005  3.29999995  4.4000001   5.5       ]
<span class="anchor" id="line-3-8"></span>/listener-1243-1248226610835 I heard [ 1.10000002  2.20000005  3.29999995  4.4000001   5.5       ]
<span class="anchor" id="line-4-7"></span>... and so on</pre><span class="anchor" id="line-167"></span><p class="line867">
</p><h2 id="Step_4:_Numpy-ize_a_Talker">Step 4: Numpy-ize a Talker</h2>
<span class="anchor" id="line-168"></span><p class="line862">Now that you know how to numpy-ize a listener, lets numpy-ize a standard talker node. This is very similar to what we did above, though you'll have to be much more careful: <em>all of your array data must be initialized as numpy arrays</em>. You are responsible for this, <em>even for fields that you wish to be initialized with default values</em>. You must also be careful that you specify the correct numpy data type when creating these arrays as rospy will not be able to catch this mistake. <span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span></p><p class="line862">With those warnings out of the way, let's look at a numpy-ized talker. Create a new file, <tt class="backtick">numpy_talker.py</tt>, with the following: <span class="anchor" id="line-171"></span><span class="anchor" id="line-172"></span></p><p class="line867"><span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span><span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span><span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span><span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span><span class="anchor" id="line-193"></span><span class="anchor" id="line-1-23"></span></p><div class="highlight python"><div class="codearea" dir="ltr" lang="en">
<script type="text/javascript">
document.write('<a href="#" onclick="return togglenumber(\'CA-9e4ee161579e05205d4be7a631decf5ac989483d\', 1, 1);" \
                class="codenumbers">Toggle line numbers<\/a>');
</script><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#" onclick="return togglenumber(&#39;CA-9e4ee161579e05205d4be7a631decf5ac989483d&#39;, 1, 1);" class="codenumbers">Toggle line numbers</a>
<pre dir="ltr" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d" lang="en"><span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_1">   1</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_1"></span><span class="anchor" id="line-1-24"></span><span class="Comment">#!/usr/bin/env python</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_2">   2</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_2"></span><span class="anchor" id="line-2-11"></span><span class="ID">PKG</span> = <span class="String">'</span><span class="String">numpy_tutorial</span><span class="String">'</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_3">   3</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_3"></span><span class="anchor" id="line-3-9"></span><span class="ResWord">import</span> <span class="ID">roslib</span>; <span class="ID">roslib</span>.<span class="ID">load_manifest</span>(<span class="ID">PKG</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_4">   4</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_4"></span><span class="anchor" id="line-4-8"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_5">   5</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_5"></span><span class="anchor" id="line-5-6"></span><span class="ResWord">import</span> <span class="ID">rospy</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_6">   6</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_6"></span><span class="anchor" id="line-6-6"></span><span class="ResWord">from</span> <span class="ID">rospy.numpy_msg</span> <span class="ResWord">import</span> <span class="ID">numpy_msg</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_7">   7</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_7"></span><span class="anchor" id="line-7-6"></span><span class="ResWord">from</span> <span class="ID">rospy_tutorials.msg</span> <span class="ResWord">import</span> <span class="ID">Floats</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_8">   8</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_8"></span><span class="anchor" id="line-8-6"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_9">   9</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_9"></span><span class="anchor" id="line-9-5"></span><span class="ResWord">import</span> <span class="ID">numpy</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_10">  10</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_10"></span><span class="anchor" id="line-10-4"></span><span class="ResWord">def</span> <span class="ID">talker</span>():</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_11">  11</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_11"></span><span class="anchor" id="line-11-4"></span>    <span class="ID">pub</span> = <span class="ID">rospy</span>.<span class="ID">Publisher</span>(<span class="String">'</span><span class="String">floats</span><span class="String">'</span>, <span class="ID">numpy_msg</span>(<span class="ID">Floats</span>),<span class="ID">queue_size</span>=<span class="Number">10</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_12">  12</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_12"></span><span class="anchor" id="line-12-4"></span>    <span class="ID">rospy</span>.<span class="ID">init_node</span>(<span class="String">'</span><span class="String">talker</span><span class="String">'</span>, <span class="ID">anonymous</span>=<span class="ResWord">True</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_13">  13</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_13"></span><span class="anchor" id="line-13-4"></span>    <span class="ID">r</span> = <span class="ID">rospy</span>.<span class="ID">Rate</span>(<span class="Number">10</span>) <span class="Comment"># 10hz</span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_14">  14</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_14"></span><span class="anchor" id="line-14-4"></span>    <span class="ResWord">while</span> <span class="ResWord">not</span> <span class="ID">rospy</span>.<span class="ID">is_shutdown</span>():</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_15">  15</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_15"></span><span class="anchor" id="line-15-4"></span>        <span class="ID">a</span> = <span class="ID">numpy</span>.<span class="ID">array</span>([<span class="Number">1.0</span>, <span class="Number">2.1</span>, <span class="Number">3.2</span>, <span class="Number">4.3</span>, <span class="Number">5.4</span>, <span class="Number">6.5</span>], <span class="ID">dtype</span>=<span class="ID">numpy</span>.<span class="ID">float32</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_16">  16</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_16"></span><span class="anchor" id="line-16-4"></span>        <span class="ID">pub</span>.<span class="ID">publish</span>(<span class="ID">a</span>)</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_17">  17</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_17"></span><span class="anchor" id="line-17-4"></span>        <span class="ID">r</span>.<span class="ID">sleep</span>()</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_18">  18</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_18"></span><span class="anchor" id="line-18-2"></span></span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_19">  19</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_19"></span><span class="anchor" id="line-19-1"></span><span class="ResWord">if</span> <span class="ID">__name__</span> == <span class="String">'</span><span class="String">__main__</span><span class="String">'</span>:</span>
<span class="line"><span class="LineNumber"><a href="http://wiki.ros.org/rospy_tutorials/Tutorials/numpy#CA-9e4ee161579e05205d4be7a631decf5ac989483d_20">  20</a> </span><span class="LineAnchor" id="CA-9e4ee161579e05205d4be7a631decf5ac989483d_20"></span><span class="anchor" id="line-20-1"></span>    <span class="ID">talker</span>()</span>
</pre></div></div><span class="anchor" id="line-194"></span><p class="line874">Don't forget: <span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span></p><p class="line867"><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span></p><pre><span class="anchor" id="line-1-25"></span>chmod +x numpy_talker.py</pre><span class="anchor" id="line-199"></span><p class="line862">Just like the listener example, there is a <tt class="backtick">from&nbsp;rospy.numpy_msg&nbsp;import&nbsp;numpy_msg</tt> to get the <tt class="backtick">numpy_msg()</tt> wrapper. You can also see that this is used when creating the <tt class="backtick">Publisher</tt> instance: <span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span></p><p class="line867"><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span></p><pre><span class="anchor" id="line-1-26"></span>pub = rospy.Publisher('floats', numpy_msg(Floats))</pre><span class="anchor" id="line-204"></span><p class="line862">The new step we see with the talker example is actually creating our own numpy array. This is where we have to be careful. As was mentioned before, every numerical array in the Message must be initialized with a numpy array of the correct data type. Choosing the correct data type is fairly easy as numpy data types map directly onto ROS data types.  In this example we create a simple array of <tt class="backtick">numpy.float32</tt>: <span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span></p><p class="line867"><span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span></p><pre><span class="anchor" id="line-1-27"></span>a = numpy.array([1.0, 2.1, 3.2, 4.3, 5.4, 6.5], dtype=numpy.float32)</pre><span class="anchor" id="line-209"></span><p class="line862">Now that we have a talker node, we don't need <tt class="backtick">rostopic&nbsp;pub</tt>. This time we can run roscore, the listener Node, and the talker Node: <span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span></p><p class="line874">Window 1: <span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span></p><p class="line867"><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span></p><pre><span class="anchor" id="line-1-28"></span>roscore</pre><span class="anchor" id="line-216"></span><p class="line874">Window 2: <span class="anchor" id="line-217"></span><span class="anchor" id="line-218"></span></p><p class="line867"><span class="anchor" id="line-219"></span><span class="anchor" id="line-220"></span></p><pre><span class="anchor" id="line-1-29"></span>rosrun numpy_tutorial numpy_listener.py</pre><span class="anchor" id="line-221"></span><p class="line874">Window 3: <span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span></p><p class="line867"><span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span></p><pre><span class="anchor" id="line-1-30"></span>rosrun numpy_tutorial numpy_talker.py</pre><span class="anchor" id="line-226"></span><p class="line874">This time you'll see <span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span></p><p class="line867"><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span></p><pre><span class="anchor" id="line-1-31"></span>$ rosrun rospy_tutorials listener_numpy.py
<span class="anchor" id="line-2-12"></span>/listener-1423-1248226794834 I heard [ 1.          2.0999999   3.20000005  4.30000019  5.4000001   6.5       ]
<span class="anchor" id="line-3-10"></span>/listener-1423-1248226794834 I heard [ 1.          2.0999999   3.20000005  4.30000019  5.4000001   6.5       ]
<span class="anchor" id="line-4-9"></span>... and so on</pre><span class="anchor" id="line-234"></span><p class="line874">That's it! That's all you need to know to use numpy with rospy. <span class="anchor" id="line-235"></span><span class="anchor" id="line-236"></span></p><p class="line867"></p><hr class="hr1"><p class="line874"> <span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span></p><p class="line867"><span class="anchor" id="line-239"></span></p><p class="line867"><span class="anchor" id="line-240"></span></p><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-241"></span><a href="http://wiki.ros.org/CategoryHomepage">CategoryHomepage</a> <span class="anchor" id="line-242"></span><span class="anchor" id="bottom"></span></p></div></div>
<div id="pagebottom"></div>
</div>

<p id="pageinfo" class="info" lang="en" dir="ltr">Wiki: rospy_tutorials/Tutorials/numpy  (last edited 2014-10-22 13:29:18 by <span title="dasanche @ 195.37.61.178[195.37.61.178]"><a class="nonexistent" href="http://wiki.ros.org/dasanche" title="dasanche @ 195.37.61.178[195.37.61.178]">dasanche</a></span>)</p>




<div style="margin-top: 9px;" class="footer">
Except where otherwise noted, the ROS wiki is licensed under the <br><a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a> | <a href="https://plus.google.com/113789706402978299308" rel="publisher">Find us on Google+</a>
<hr style="margin-top: 10px;">
<div class="row">
  <div class="col-md-4 col-md-offset-4">
<a href="http://www.osrfoundation.org/"><img style="margin-top: -1px;" src="./rospy_tutorials_Tutorials_numpy - ROS Wiki_files/brought_by_horiz.png"><p></p></a>
  </div>
</div>
</div>

  </div> <!-- /#dpage-inner, /#dpage -->





</body></html>